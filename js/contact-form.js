"use strict";(()=>{const e=document.querySelector("section.contact .form form"),s=e.querySelector("#name"),a=e.querySelector("#email"),n=e.querySelector("#message"),t=e.querySelector("button[type=submit]");e.addEventListener("submit",async function(e){e.preventDefault(),t.innerHTML='<img src="images/tail_spin.svg" alt="Loader">',t.classList.add("sending"),t.disabled=!0;const i=s.value,c=a.value,r=n.value.replace(/\n/g,"<br>");try{const e=await grecaptcha.execute("6LdeybwUAAAAAG3V_ucEe6pfXFSNvH5XIgbdBLmw",{action:"homepage"}),s=await async function(e,s){const a=await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrer:"no-referrer",body:JSON.stringify(s)});return await a.json()}("https://mailer.jasiun.pl",{name:i,email:c,message:r,token:e});if("success"!=s.status)throw"Response incorrect";t.innerHTML="<span></span><span></span>",t.classList.remove("sending"),t.classList.add("success")}catch(e){console.error(e),t.innerHTML="<span></span><span></span><span>Coś poszło nie tak...</span>",t.classList.remove("sending"),t.classList.add("error")}}),t.addEventListener("click",function(s){if(t.classList.contains("animate")||t.classList.contains("sending")||t.classList.contains("success")||t.classList.contains("error"))return void s.preventDefault();e.checkValidity()||t.classList.add("animate")}),t.addEventListener("animationend",()=>{t.classList.remove("animate")})})();