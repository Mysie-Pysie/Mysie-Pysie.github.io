const nav=document.querySelector("nav"),hamburger=document.querySelector("nav a.hamburger"),navLogo=document.querySelector("nav .logo"),navItems=Array.from(document.querySelectorAll("nav li a")),navBarHeight=nav.clientHeight,sectionToHash=new Map,hashToSection=new Map,sectionToNav=new Map,navToSection=new Map;function scrollToInitSection(){const e=hashToSection.get(location.hash);e&&scrollToSection(e)}function scrollToSection(e){window.scrollTo({top:e.offsetTop+getErrata(e)-navBarHeight,left:0,behavior:"smooth"}),nav.classList.remove("open")}function showHideLogo(){window.requestAnimationFrame(()=>{window.scrollY>400?navLogo.classList.add("show"):navLogo.classList.remove("show")})}function refreshNavigation(){for(let e of navItems)e.parentNode.classList.remove("active");const e=findFarthestSection();e&&(history.replaceState(null,null,sectionToHash.get(e)),sectionToNav.get(e).parentNode.classList.add("active"))}function findFarthestSection(){let e=null;for(section of sectionToNav.keys())section.offsetTop-navBarHeight-10<window.scrollY&&section.offsetTop>0&&(e=section);return e}function getErrata(e){switch(sectionToHash.get(e)){case"#o-nas":return 50;case"#cennik":return 30}return 0}function outsideClick(e){nav.contains(e.target)||nav.classList.remove("open")}window.addEventListener("load",()=>{for(let e of navItems)for(let o of Array.from(e.classList)){const t=document.querySelector(`section.${o}`);t&&(sectionToHash.set(t,`#${t.id}`),hashToSection.set(`#${t.id}`,t),sectionToNav.set(t,e),navToSection.set(e,t),t.removeAttribute("id"))}for(let e of navToSection.keys())e.addEventListener("click",o=>{scrollToSection(navToSection.get(e)),o.preventDefault()});hamburger.addEventListener("click",e=>{nav.classList.toggle("open"),e.preventDefault()}),document.addEventListener("mousedown",outsideClick),document.addEventListener("touchstart",outsideClick,!0),window.addEventListener("scroll",e=>{showHideLogo(),refreshNavigation()}),refreshNavigation(),scrollToInitSection()});